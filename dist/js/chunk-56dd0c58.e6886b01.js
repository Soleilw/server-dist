(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56dd0c58"],{"22aa":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"main"},[l("div",{staticClass:"btn"},[l("el-button",{attrs:{type:"primary",icon:"el-icon-delete",disabled:e.disabledDel},on:{click:function(t){return e.delSelection()}}},[e._v("全部删除")]),l("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")])],1),l("el-table",{ref:"multipleTable",staticClass:"aip-table",attrs:{data:e.tableDate},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{label:"名称",type:"selection",align:"center"}}),l("el-table-column",{attrs:{prop:"id",label:"学校ID",align:"center"}}),l("el-table-column",{attrs:{prop:"name",label:"学校名称",align:"center"}}),l("el-table-column",{attrs:{prop:"address",label:"学校地址",align:"center"}}),l("el-table-column",{attrs:{prop:"created_at",label:"创建时间",align:"center"}}),l("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini"},on:{click:function(l){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),l("div",{staticClass:"block"},[l("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:e.totalPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),l("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"学校名称"}},[l("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),l("el-form-item",{attrs:{label:"学校地址"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),l("el-form-item",{attrs:{label:"人脸库(进)"}},[l("el-input",{model:{value:e.form.in_group,callback:function(t){e.$set(e.form,"in_group",t)},expression:"form.in_group"}})],1),l("el-form-item",{attrs:{label:"人脸库(出)"}},[l("el-input",{model:{value:e.form.out_group,callback:function(t){e.$set(e.form,"out_group",t)},expression:"form.out_group"}})],1),l("el-form-item",{attrs:{label:"mode"}},[l("el-input",{model:{value:e.form.mode,callback:function(t){e.$set(e.form,"mode",t)},expression:"form.mode"}})],1),l("el-form-item",{attrs:{label:"用户名"}},[l("el-input",{model:{value:e.form.user.username,callback:function(t){e.$set(e.form.user,"username",t)},expression:"form.user.username"}})],1),l("el-form-item",{attrs:{label:"密码"}},[l("el-input",{model:{value:e.form.user.password,callback:function(t){e.$set(e.form.user,"password",t)},expression:"form.user.password"}})],1),e._l(e.form.grades,(function(t,a){return l("div",{key:a},[l("el-form-item",{attrs:{label:"年级选择"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:t.title,callback:function(l){e.$set(t,"title",l)},expression:"item.title"}},e._l(e.grade,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"班级"}},[l("el-transfer",{attrs:{data:e.classList,titles:["班级","选中班级"],"button-texts":["取消","确定"]},model:{value:t.classes,callback:function(l){e.$set(t,"classes",l)},expression:"item.classes"}})],1)],1)})),l("el-form-item",{attrs:{label:"操作"}},[l("el-button",{attrs:{type:"success"},on:{click:e.addGrade}},[e._v("添加年级")]),l("el-button",{attrs:{type:"success"},on:{click:e.delGrade}},[e._v("删除年级")])],1),l("div",{staticClass:"submit"},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.newSchool}},[e._v("提交")])],1)],1)],2)],1)],1)},o=[],r=(l("4160"),l("159b"),l("be3b")),n=l("99b1"),s=l.n(n),i={schools:function(e){return r["a"].get(s.a.Schools,{page:e})},school:function(e){return r["a"].post(s.a.School,e)}},c=i,u={data:function(){return{dialogFormVisible:!1,form:{name:"",address:"",in_group:"",out_group:"",mode:1,user:{username:"",password:""},grades:[]},classList:[],classData:[],grade:[{value:"一年级",label:"一年级"},{value:"二年级",label:"二年级"},{value:"三年级",label:"三年级"},{value:"四年级",label:"四年级"},{value:"五年级",label:"五年级"},{value:"六年级",label:"六年级"},{value:"初一",label:"初一"},{value:"初二",label:"初二"},{value:"初三",label:"初三"}],rules:{logo:[{required:!0}],name:[{required:!0,message:"请填写校名",trigger:"blur"}]},tableDate:[],multipleSelection:[],disabledDel:!0,currentPage:1,totalPage:0}},mounted:function(){this.generateData(),this.getSchool()},methods:{handleDelete:function(e,t){console.log(e,t)},getSchool:function(){var e=this;c.schools(e.currentPage).then((function(t){e.tableDate=t.data,e.totalPage=t.total}))},handleSelectionChange:function(e){this.multipleSelection=e,this.disabledDel=!1,""==this.multipleSelection&&(this.disabledDel=!0)},delSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.delSelection(e)})):this.$refs.multipleTable.clearSelection()},addGrade:function(){var e=this;e.form.grades.push({})},generateData:function(e){for(var t=this,l=["一班","二班","三班","四班","五班","六班","七班","八班","九班","十班"],a=0;a<l.length;a++)t.classList.push({key:l[a],label:l[a]});return t.classList},delGrade:function(){var e=this;e.form.grades.pop({})},newSchool:function(){var e=this;e.form.grades.forEach((function(e){for(var t=0;t<e.classes.length;t++)e.classes[t]={title:e.classes[t]}})),c.school(this.form).then((function(t){e.dialogFormVisible=!1,e.getSchool(),e.form={},e.$message.success("提交成功")}))},handleCurrentChange:function(e){var t=this;t.getSchool()}}},m=u,d=(l("ec4a"),l("2877")),f=Object(d["a"])(m,a,o,!1,null,"22d958cc",null);t["default"]=f.exports},"28b2":function(e,t,l){},ec4a:function(e,t,l){"use strict";var a=l("28b2"),o=l.n(a);o.a}}]);
//# sourceMappingURL=chunk-56dd0c58.e6886b01.js.map