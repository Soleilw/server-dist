(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ded0f360"],{"365c":function(e,t,a){"use strict";var n=a("be3b"),r=a("99b1"),o=a.n(r),i={students:function(e,t,a){return n["a"].get(o.a.Students,{page:e,limit:t,class_id:a})},student:function(e){return n["a"].post(o.a.Student,e)},delStudent:function(e){return n["a"].del(o.a.DelStudent,{student_id:e})},searchName:function(e,t,a,r){return n["a"].get(o.a.Students,{page:e,limit:t,name:a,number:r})},wxUser:function(e,t){return n["a"].get(o.a.WxUser,{page:e,limit:t})},bindFamily:function(e){return n["a"].post(o.a.BindFamily,e)},familySearch:function(e,t,a){return n["a"].get(o.a.FamilySearch,{page:e,limit:t,number:a})},studentFace:function(e){return n["a"].post(o.a.StudentFace,e)},studentEditFace:function(e){return n["a"].put(o.a.StudentEditFace,e)},faceLogs:function(e,t,a){return n["a"].get(o.a.StudentFaceLogs,{page:e,limit:t,id:a})},notice:function(e,t){return n["a"].get(o.a.Notice,{page:e,limit:t})},grade:function(e){return n["a"].post(o.a.Grade,e)},grades:function(e,t){return n["a"].get(o.a.Grades,{page:e,limit:t})},delGrade:function(e){return n["a"].del(o.a.DelGrade,{grade_id:e})},_class:function(e){return n["a"].post(o.a.Class,e)},classes:function(e,t,a){return n["a"].get(o.a.Classes,{page:e,limit:t,grade_id:a})},delClass:function(e){return n["a"].del(o.a.DelClass,{class_id:e})},device:function(e){return n["a"].post(o.a.Device,e)},devices:function(e){return n["a"].post(o.a.Devices,{page:e})},family:function(e,t){return n["a"].get(o.a.Family,{page:e,limit:t})},masterFamily:function(e){return n["a"].put(o.a.MasterFamily,e)},delFamily:function(e){return n["a"].del(o.a.DelFamily,{id:e})},announcement:function(e){return n["a"].get(o.a.Announcement,{page:e})},exam:function(e){return n["a"].post(o.a.Exam,e)},exams:function(e,t){return n["a"].get(o.a.Exams,{page:e,limit:t})},examsDetail:function(e,t,a){return n["a"].get(o.a.ExamsDetail,{page:e,limit:t,exam_id:a})},delExam:function(e){return n["a"].del(o.a.Exam,{id:e})},subjects:function(){return n["a"].get(o.a.Subjects)},importsExam:function(e,t){return n["a"].post(o.a.ImportsExam,{exam_id:e,file:t})},imports:function(e,t){return n["a"].get(o.a.Imports,{page:e,limit:t})},delImport:function(e){return n["a"].del(o.a.DelImport,{id:e})},example:function(e){return n["a"].getExcel(o.a.Export,{subjects:e})},teacher:function(e,t,a,r){return n["a"].get(o.a.Teacher,{page:e,limit:t,state:a,worker:r})},delTeacher:function(e){return n["a"].del(o.a.DelTeacher,{id:e})},audit:function(e){return n["a"].post(o.a.Audit,e)},schools:function(e,t,a,r){return n["a"].get(o.a.Schools,{page:e,limit:t,mode:a,id:r})},oneSchool:function(e){return n["a"].get(o.a.School,{id:e})},studentInfo:function(e,t,a){return n["a"].get(o.a.StudentInfo,{page:e,limit:t,school_id:a})},schoolUser:function(e,t,a){return n["a"].get(o.a.SchoolUser,{page:e,limit:t,school_id:a})},visitors:function(e,t,a){return n["a"].get(o.a.Visitors,{page:e,limit:t,school_id:a})},teacherUser:function(e,t,a){return n["a"].get(o.a.TeacherUser,{page:e,limit:t,school_id:a})},orders:function(e,t,a){return n["a"].get(o.a.Orders,{page:e,limit:t,school_id:a})},server:function(e,t,a){return n["a"].get(o.a.Server,{page:e,limit:t,product_id:a})},schoolTeacher:function(e,t,a){return n["a"].get(o.a.Teacher,{page:e,limit:t,school_id:a})},school:function(e){return n["a"].post(o.a.School,e)},delSchool:function(e){return n["a"].del(o.a.DelSchool,{school_id:e})},banners:function(e,t){return n["a"].get(o.a.Banners,{page:e,limit:t})},banner:function(e){return n["a"].post(o.a.Banner,e)},message:function(e){return n["a"].post(o.a.Message,e)},messages:function(e,t){return n["a"].get(o.a.Messages,{page:e,limit:t})},messageType:function(e){return n["a"].post(o.a.MessageType,e)},messageTypes:function(e,t){return n["a"].get(o.a.MessageTypes,{page:e,limit:t})},delDocumentType:function(e){return n["a"].del(o.a.DelDocumentType,{id:e})},documents:function(e,t){return n["a"].get(o.a.Documents,{page:e,limit:t})},delDocument:function(e){return n["a"].del(o.a.DelDocument,{id:e})},document:function(e){return n["a"].post(o.a.Document,e)},documentDel:function(e){return n["a"].del(o.a.DocumentDel,{id:e})},delBanner:function(e){return n["a"].del(o.a.DelBanner,{id:e})},buys:function(e,t){return n["a"].get(o.a.Buys,{page:e,limit:t})},buy:function(e){return n["a"].post(o.a.Buy,e)},roles:function(e,t){return n["a"].get(o.a.Roles,{page:e,limit:t})},role:function(e){return n["a"].post(o.a.Role,e)},delRole:function(e){return n["a"].del(o.a.DelRole,{id:e})},user:function(e){return n["a"].post(o.a.User,e)},users:function(e,t){return n["a"].get(o.a.Users,{page:e,limit:t})},delUser:function(e){return n["a"].del(o.a.DelUser,{id:e})},resetPassword:function(e){return n["a"].post(o.a.ResetPassword,e)},goods:function(e){return n["a"].get(o.a.Buys,{school_id:e})},setProduct:function(e){return n["a"].post(o.a.SetProduct,e)},banProduct:function(e){return n["a"].post(o.a.BanProduct,e)},banProducts:function(e){return n["a"].get(o.a.BanProducts,{user_id:e})},userSearch:function(e){return n["a"].get(o.a.UserSearch,{id:e})},jurisdictionSchool:function(e,t){return n["a"].get(o.a.JurisdictionSchool,{user_id:e,mode:t})},jurisdictionProducts:function(e){return n["a"].get(o.a.JurisdictionProducts,{school_id:e})},jurisdictionStudent:function(e,t){return n["a"].get(o.a.JurisdictionStudent,{user_id:e,school_id:t})},studentsTatal:function(e,t){return n["a"].get(o.a.StudentsTatal,{type:e,id:t})},studentGender:function(e,t,a,r){return n["a"].get(o.a.StudentGender,{sex:e,type:t,school_id:a,grade_id:r})},classCheckCount:function(e){return n["a"].get(o.a.ClassCheckCount,{id:e})},statistics:function(e,t){return n["a"].get(o.a.Statistics,{school_id:e,grade_id:t})}};t["a"]=i},8649:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addBuy}},[e._v("添加购买服务")])],1),a("div",{staticClass:"btn"},[a("span",[e._v("学校：")]),a("el-select",{attrs:{placeholder:"请选择学校"},model:{value:e.form.school,callback:function(t){e.$set(e.form,"school",t)},expression:"form.school"}},e._l(e.schoolList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),a("el-dialog",{attrs:{title:"添加购买服务",visible:e.dialogBuy},on:{"update:visible":function(t){e.dialogBuy=t}}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择学校"}},[a("el-select",{attrs:{placeholder:"请选择学校"},model:{value:e.form.school,callback:function(t){e.$set(e.form,"school",t)},expression:"form.school"}},e._l(e.schoolList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"选择服务"}},[a("el-checkbox",{on:{change:e.handleCheckAllService},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("div",{staticClass:"service"},e._l(e.serviceList,(function(t,n){return a("div",{key:n},[a("el-checkbox-group",{staticClass:"service-item",model:{value:e.form.service,callback:function(t){e.$set(e.form,"service",t)},expression:"form.service"}},[a("el-checkbox",{attrs:{label:t},on:{change:e.oneChange}},[e._v(e._s(t.name))])],1)],1)})),0)],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"商品价格"}},[a("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),a("el-form-item",{attrs:{label:"商品时长"}},[a("el-input",{model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),a("el-form-item",{attrs:{label:"商品描述"}},[a("el-input",{model:{value:e.form.detail,callback:function(t){e.$set(e.form,"detail",t)},expression:"form.detail"}})],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newBuy}},[e._v("提交")])],1)],1)],1)],1)]),a("el-dialog",{attrs:{title:"订单列表",visible:e.showServiceOrder,width:"80%"},on:{"update:visible":function(t){e.showServiceOrder=t}}},[a("div",{staticClass:"box"},[a("div",[a("el-table",{attrs:{data:e.orderData,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"no",label:"订单ID"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"user_name",label:"用户名"}}),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"price",label:"商品价格"}}),a("el-table-column",{attrs:{prop:"time",label:"商品时长"}}),a("el-table-column",{attrs:{prop:"status",label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("提交")]):2==t.row.status?a("span",[e._v("已付款")]):3==t.row.status?a("span",[e._v("无效")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"create_id",label:"创建时间"}})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentOrderPage,"page-sizes":[10,20,30,40,50],"page-size":e.orderPageSize,layout:"sizes, prev, pager, next, jumper",total:e.orderTotalPage},on:{"current-change":e.handleOrderChange,"update:currentPage":function(t){e.currentOrderPage=t},"update:current-page":function(t){e.currentOrderPage=t},"size-change":e.handleOrderSizeChange}})],1)],1)])]),a("el-table",{attrs:{data:e.tableDate,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"商品ID",width:"100px"}}),a("el-table-column",{attrs:{prop:"title",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"price",label:"商品价格"}}),a("el-table-column",{attrs:{prop:"time",label:"商品时长(天)"}}),a("el-table-column",{attrs:{prop:"detail",label:"商品描述"}}),a("el-table-column",{attrs:{prop:"service[0].name",label:"服务权限"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"更新时间"}}),a("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑服务")]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleOrder(t.$index,t.row)}}},[e._v("服务订单")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40,50],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1)],1)},r=[],o=(a("4160"),a("b0c0"),a("159b"),a("365c")),i={name:"buy",data:function(){return{loading:!0,schoolList:[],school:"",dialogBuy:!1,showServiceOrder:!1,checkAll:!1,serviceIdList:[],serviceList:[{title:"sendInfo",name:"消息推送"},{title:"classesNotice",name:"班级公告"},{title:"studentLocal",name:"学生定位"},{title:"out-inRecord",name:"学生进出记录"},{title:"markInquire",name:"成绩查询"},{title:"buyLocator",name:"购买定位器"}],form:{title:"",price:"",detail:"",service:[],school:"",time:""},financial:"订单列表",financialList:[{value:1,label:"订单列表"},{value:2,label:"财务统计"}],orderData:[],orderPageSize:10,orderTotalPage:0,currentOrderPage:1,tableDate:[],current:1,total:0,size:10}},mounted:function(){this.getBuys(),this.getSchool()},methods:{getBuys:function(){var e=this;o["a"].buys(e.current).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})).catch((function(t){e.loading=!1}))},currentChange:function(e){var t=this;t.current=e,t.loading=!0,o["a"].buys(e,t.size).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1}))},sizeChange:function(e){var t=this;t.size=e,t.loading=!0,o["a"].buys(t.current,e).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1}))},newBuy:function(){var e=this;o["a"].buy(e.form).then((function(t){e.dialogBuy=!1,e.$message.success("提交成功"),e.getBuys(),e.current=1,e.form={},e.form.service=[]}))},addBuy:function(){var e=this;e.dialogBuy=!0,e.checkAll=!1,e.form={title:"",price:"",detail:"",service:[],school:"",time:""}},getSchool:function(){var e=this;o["a"].schools(e.current,100,2).then((function(t){e.schoolList=t.data}))},handleCheckAllService:function(e){var t=this;console.log("handleCheckAllService",e),t.form.service=e?t.serviceList:[]},oneChange:function(){var e=this;console.log(e.form.service),console.log(e.serviceList),6===e.form.service.length?e.checkAll=!0:e.checkAll=!1},handleEdit:function(e,t){var a=this;a.dialogBuy=!0,a.form=t;var n=[];t.service.forEach((function(e){n.push({title:e.title,name:e.name})})),a.form.service=n,console.log(t),6===t.service.length?a.checkAll=!0:a.checkAll=!1},handleOrder:function(e,t){var a=this;a.showServiceOrder=!0,a.product_id=t.id,o["a"].server(1,a.size,a.product_id).then((function(e){a.orderData=e.data,a.orderTotalPage=e.total,a.$message.success("获取数据成功")}))},handleOrderChange:function(e){var t=this;t.currentOrderPage=e,o["a"].server(e,t.orderPageSize,t.id).then((function(e){t.orderData=e.data,t.orderTotalPage=e.total}))},handleOrderSizeChange:function(e){var t=this;o["a"].server(e,t.currentOrderPage,t.id).then((function(e){t.orderData=e.data,t.orderTotalPage=e.total}))}}},l=i,c=(a("d1d5"),a("2877")),s=Object(c["a"])(l,n,r,!1,null,"3c435f7b",null);t["default"]=s.exports},af78:function(e,t,a){},d1d5:function(e,t,a){"use strict";var n=a("af78"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-ded0f360.7a3613c9.js.map